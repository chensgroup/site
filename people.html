<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chen's Group</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* 版面寬度與標題 */
    main { max-width: 1100px; margin: 0 auto; padding: 2rem 1rem; }
    h2 { margin-top: 0; }

    /* 成員格子：桌機三欄 */
    .photo-grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:2rem;
      justify-items:center;
      align-items:start;
    }
    .person-card{ width:220px; text-align:center; cursor:default; }
    .person-card img{
      width:100%;
      aspect-ratio:4/5;
      object-fit:cover;
      border-radius:12px;
      transition:transform .3s ease, box-shadow .3s ease;
      box-shadow:0 4px 12px rgba(0,0,0,.1);
    }
    .person-card:hover img{ transform:scale(1.04); box-shadow:0 6px 16px rgba(0,0,0,.15); }
    .person-card p{ margin:.35rem 0; line-height:1.4; }

    /* 可點的卡片 */
    .person-card.profile{ cursor:pointer; }

    /* 平板：兩欄 */
    @media (max-width: 900px){
      .photo-grid{ grid-template-columns:repeat(2,1fr); }
    }
    /* 手機：一欄、隱藏英文行讓畫面乾淨 */
    @media (max-width: 560px){
      .photo-grid{ grid-template-columns:1fr; gap:1.2rem; }
      .person-card{ width:min(92vw,420px); margin:0 auto; }
      .lang-en{ display:none; }
    }

    /* 彈窗背景 */
    .modal{
      display:none;
      position:fixed;
      inset:0;
      z-index:1000;
      background:rgba(0,0,0,.5);
    }
    /* 彈窗面板：桌機左右欄 */
    .modal__panel{
      position:relative;
      width:min(900px,92vw);
      margin:6vh auto;
      background:#fff;
      border-radius:12px;
      padding:1.5rem;
      display:grid;
      grid-template-columns:260px 1fr;
      gap:1.25rem;
      animation:fadeIn .25s ease;
      box-shadow:0 10px 30px rgba(0,0,0,.2);
    }
    .modal__photo img{
      width:100%;
      aspect-ratio:4/5;
      object-fit:cover;
      border-radius:10px;
      display:block;
    }
    .modal__body h2{ margin:.2rem 0 .25rem 0; font-size:1.4rem; }
    .modal__subtitle{ margin:0 0 .75rem 0; color:#555; font-weight:600; }
    .modal__info p{ margin:.35rem 0; line-height:1.55; }
    .modal__info strong{ color:#1f3d7a; }

    .modal__close{
      position:absolute;
      right:12px; top:10px;
      font-size:1.8rem;
      line-height:1;
      border:none;
      background:transparent;
      color:#666;
      cursor:pointer;
    }
    .modal__close:hover{ color:#000; }

    @keyframes fadeIn{ from{opacity:0; transform:translateY(-6px);} to{opacity:1; transform:translateY(0);} }

    /* 手機：全螢幕工作表風格，上圖下文，置頂欄顯示姓名與關閉 */
    @media (max-width: 720px){
      .modal{ background:rgba(0,0,0,.65); }
      .modal__panel{
        width:100vw; height:100vh; margin:0; border-radius:0; padding:0;
        grid-template-columns:1fr; grid-template-rows:auto auto 1fr;
        overflow:hidden;
      }
      .modal__topbar{
        position:sticky; top:0;
        background:#fff; padding:.9rem 1rem;
        border-bottom:1px solid #eee;
        display:flex; align-items:center; gap:.75rem; z-index:1;
      }
      .modal__topbar .name{ font-weight:600; }
      .modal__close{ position:static; font-size:1.5rem; margin-left:auto; }
      .modal__photo img{ width:100%; height:40vh; border-radius:0; object-fit:cover; }
      .modal__body{ padding:1rem 1.1rem 1.5rem; overflow:auto; }
      .modal__body h2{ font-size:1.25rem; }
    }

    /* 開啟彈窗時鎖住背景滾動 */
    body.no-scroll{ overflow:hidden; }
  </style>
</head>
<body>
  <header>
    <h1>Chen's Group</h1>
    <nav class="menu-zh">
      <a href="index.html">首頁</a>
      <a href="people.html">成員</a>
      <a href="research.html">研究</a>
      <a href="course.html">課程</a>
      <a href="resources.html">資源</a>
      <a href="index_en.html">English</a>
    </nav>
  </header>

  <main>
    <h2>成員介紹</h2>

    <div class="photo-grid">
      <!-- 教授：可點開 -->
      <div class="person-card profile" tabindex="0"
           data-name="陳教授"
           data-title="合聘副教授"
           data-degree="國立臺灣大學博士"
           data-office=""
           data-fields="奈米光學, 物理教學, 數理資優教育"
           data-expertise="電漿子能量與電荷轉移、探究與實作教學策略、科學本質與認識論、IB Physics Teacher Education"
           data-phone="02-76543210"
           data-email="chens@uuuu.edu.tw"
           data-website="http://chen.blogspot.com/"
           data-photo="images/professor.png">
        <img src="images/professor.png" alt="Prof. Chen" />
        <p class="lang-zh"><strong>陳教授</strong><br>實驗室主持人</p>
        <p class="lang-en"><strong>Prof. Chen</strong><br>Lab Director</p>
      </div>

      <!-- 王小明：示範也可點 -->
      <div class="person-card profile" tabindex="0"
           data-name="王小明"
           data-title="免費勞工"
           data-degree="國立臺灣沒有大學畢業"
           data-office="應該都在本部"
           data-fields="吃飯、睡覺、打咚咚"
           data-expertise="如何吃飽、睡好、I'm fine thank you and you"
           data-phone="0998-765-432"
           data-email="Wang@uuuu.edu.tw"
           data-photo="images/member1.png">
        <img src="images/member1.png" alt="王小明 / Wang Xiaoming" />
        <p class="lang-zh"><strong>王小明</strong><br>菸酒生 (2024-)</p>
        <p class="lang-en"><strong>Wang Xiaoming</strong><br>Graduate Student</p>
      </div>

      <!-- 其他成員：先維持不可點，之後要開啟就加 profile 與 data-* -->
      <div class="person-card">
        <img src="images/member2.png" alt="林小白 / Lin Xiaobai" />
        <p class="lang-zh"><strong>林小白</strong><br>網站維護</p>
        <p class="lang-en"><strong>Lin Xiaobai</strong><br>Web Maintainer</p>
      </div>

      <div class="person-card">
        <img src="images/member3.png" alt="張大偉 / Chang David" />
        <p class="lang-zh"><strong>張大偉</strong><br>課程助教</p>
        <p class="lang-en"><strong>Chang David</strong><br>Course TA</p>
      </div>

      <div class="person-card">
        <img src="images/member4.png" alt="許心怡 / Hsu Hsin-Yi" />
        <p class="lang-zh"><strong>許心怡</strong><br>課程助教</p>
        <p class="lang-en"><strong>Hsu Hsin-Yi</strong><br>Course TA</p>
      </div>

      <div class="person-card">
        <img src="images/member5.png" alt="鄭乃文 / Cheng Nai-Wen" />
        <p class="lang-zh"><strong>鄭乃文</strong><br>研究生</p>
        <p class="lang-en"><strong>Cheng Nai-Wen</strong><br>Graduate Student</p>
      </div>

      <div class="person-card">
        <img src="images/member6.png" alt="劉址涵 / Liu Chih-Han" />
        <p class="lang-zh"><strong>劉址涵</strong><br>教學資源整理</p>
        <p class="lang-en"><strong>Liu Chih-Han</strong><br>Teaching Materials</p>
      </div>

      <div class="person-card">
        <img src="images/member7.png" alt="蔡承翰 / Tsai Cheng-Han" />
        <p class="lang-zh"><strong>蔡承翰</strong><br>專題生</p>
        <p class="lang-en"><strong>Tsai Cheng-Han</strong><br>Project Student</p>
      </div>
    </div>
  </main>

  <!-- 通用彈窗 -->
  <div class="modal" id="profile-modal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal__panel">
      <!-- 手機置頂列 -->
      <div class="modal__topbar" style="display:none;">
        <div class="name" id="m-name-mobile"></div>
        <button class="modal__close" aria-label="關閉">&times;</button>
      </div>

      <button class="modal__close" aria-label="關閉" title="關閉">&times;</button>

      <div class="modal__photo">
        <img id="m-photo" src="" alt="">
      </div>
      <div class="modal__body">
        <h2 id="m-name"></h2>
        <div class="modal__subtitle" id="m-title"></div>
        <div class="modal__info" id="m-info"></div>
        <div class="modal__actions" id="m-actions"></div>
      </div>
    </div>
  </div>

  <footer>
    <p>© 2025 Chen’s Group</p>
  </footer>

  <script>
  (() => {
    const modal = document.getElementById('profile-modal');
    const panel = modal.querySelector('.modal__panel');
    const closeBtns = modal.querySelectorAll('.modal__close');
    const topbar = modal.querySelector('.modal__topbar');

    const imgEl = document.getElementById('m-photo');
    const nameEl = document.getElementById('m-name');
    const nameMobileEl = document.getElementById('m-name-mobile');
    const titleEl = document.getElementById('m-title');
    const infoEl = document.getElementById('m-info');
    const actionsEl = document.getElementById('m-actions');

    const label = {
      degree:'最高學歷：',
      office:'Office Hour：',
      fields:'研究領域：',
      expertise:'研究專長：',
      phone:'電話：',
      email:'信箱：',
      website:'個人網站：'
    };

    function openModalFromCard(card){
      const data = {
        name:card.dataset.name || '',
        title:card.dataset.title || '',
        degree:card.dataset.degree || '',
        office:card.dataset.office || '',
        fields:card.dataset.fields || '',
        expertise:card.dataset.expertise || '',
        phone:card.dataset.phone || '',
        email:card.dataset.email || '',
        website:card.dataset.website || '',
        photo:card.dataset.photo || card.querySelector('img')?.src || ''
      };

      imgEl.src = data.photo;
      imgEl.alt = data.name ? data.name + ' 的照片' : 'Profile photo';
      nameEl.textContent = data.name;
      nameMobileEl.textContent = data.name;
      titleEl.textContent = data.title;

      infoEl.innerHTML = '';
      actionsEl.innerHTML = '';

      const rows = [
        ['degree', data.degree],
        ['office', data.office],
        ['fields', data.fields],
        ['expertise', data.expertise],
        ['phone', data.phone],
        ['email', data.email],
        ['website', data.website],
      ];
      rows.forEach(([key,val]) => {
        if(!val) return;
        const p = document.createElement('p');
        if(key==='email'){
          p.innerHTML = `<strong>${label[key]}</strong><a href="mailto:${val}">${val}</a>`;
        }else if(key==='website'){
          p.innerHTML = `<strong>${label[key]}</strong><a href="${val}" target="_blank" rel="noopener">${val}</a>`;
        }else{
          p.innerHTML = `<strong>${label[key]}</strong>${val}`;
        }
        infoEl.appendChild(p);
      });

      // 手機時顯示置頂列
      if (window.matchMedia('(max-width: 720px)').matches) {
        topbar.style.display = 'flex';
      } else {
        topbar.style.display = 'none';
      }

      modal.style.display = 'block';
      modal.setAttribute('aria-hidden','false');
      document.body.classList.add('no-scroll');
      document.addEventListener('keydown', escToClose);
    }

    function closeModal(){
      modal.style.display = 'none';
      modal.setAttribute('aria-hidden','true');
      document.body.classList.remove('no-scroll');
      document.removeEventListener('keydown', escToClose);
    }

    function escToClose(e){ if(e.key==='Escape') closeModal(); }

    // 點背景關閉（避免點在面板內容上就關閉）
    modal.addEventListener('click', e => { if(e.target === modal) closeModal(); });
    // 關閉鈕
    closeBtns.forEach(btn => btn.addEventListener('click', closeModal));
    // 防止面板內部點擊冒泡到背景
    panel.addEventListener('click', e => e.stopPropagation());

    // 綁定所有可點卡片
    const clickableCards = document.querySelectorAll('.person-card.profile');
    clickableCards.forEach(card => {
      card.addEventListener('click', () => openModalFromCard(card));
      card.addEventListener('keydown', e => {
        if(e.key==='Enter' || e.key===' '){
          e.preventDefault();
          openModalFromCard(card);
        }
      });
    });
  })();
  </script>
</body>
</html>
